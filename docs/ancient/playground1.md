# playground1

```jsx
require Io
require Cmdline
require Main
require Progressbar

define args {
    input= Cmdline.readpath |Cmdling.arg
    output= Cmdline.writePath |Cmdline.arg
    progress= '-p' |Cmdline.flag
}

function run args {
    buffer= args.input |Io.readbuffer
    if args.progress {
        ctx.progress= {max=_buffer length} |Progressbar.terminal
    }
    size = {args.output, buffer, progress=prog} |Io.createfile
    {returncode=0}
}

{run, args} Cmdline.main
```

|call  (regular call)
?call  (check if any result (not {}))
#call  (get num of items)
!call  (immediately collect all results)

want some other convenient operators
- is a type
- has an attr
- get an attr of given type

want a 'continue if defined' reference, perhaps ".." instead of "."?
ctx..progress.max

Use single quotes to define 'token' and double quotes for "string".

to modify an existing struct

{value, ..other}
{field=value, ..other}
{..other, field=value}

what if we stop worrying about 'names' in values and rely on custom one-off
types generated by an iterator.
field names can be any object, including a struct. how is that defined and referenced?
twodims = {{1,2} = true}
twodims.{1,2}

this means '.' isn't the best callable. what about float values?

nums = {2.2=true}
nums.2.2

perhaps slash, like a directory writePath?

twodims/{1,2}
nums/2.2

i like it, although coders will need to unlearn (this is division). what about
backspace like dos. easy button on english keyboards

twodims\{1,2}
nums\2.2

capitalized names only for modules. imports can only reference the top level module.
but is there a structured assigment

{x, y} = bigstruct    # this defines bigstruct to a value
!{x, y} = bigstruct   # extracts x and y values 
!{a} type = bigstruct  # extracts value of 'type' into variable a?

regular calls don’t necessarily compute all the childs fields. just a generator that can do it on demand. this makes accessing a ‘context’ like object super important, and it must be attached to the function so when it is called the value is used