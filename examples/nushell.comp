!mod.doc = """Get top weekly thumbed issues from github
https://julianhofer.eu/blog/2025/nushell/#format-table-in-markdown-format
"""

!import gh comp "github-api"
!import time std "core/time"


main (
    after = now - 1 week
    
    "nushell/nushell"
    -> gh.list_issues fields [title url created_at reactions]
    -> keep created_at >= after
    -> each {
        title url
        thumbs = reactions -> count content == #thumbs_up
    }
    -> sort thumbs desc
    -> first 5
)
